{"version":3,"file":"twitch.js","sources":["../../src/providers/twitch.ts"],"sourcesContent":["import { OAuth2Provider } from \"./oauth2\";\nconst defaultConfig = {\n    id: \"twitch\",\n    scope: \"user:read:email\",\n    accessTokenUrl: \"https://id.twitch.tv/oauth2/token\",\n    authorizationUrl: \"https://id.twitch.tv/oauth2/authorize\",\n    profileUrl: \"https://api.twitch.tv/helix/users\",\n};\nexport class TwitchOAuth2Provider extends OAuth2Provider {\n    constructor(config) {\n        super({\n            ...defaultConfig,\n            ...config,\n        });\n    }\n    async getUserProfile(tokens) {\n        const headers = {\n            \"Client-ID\": this.config.clientId + \"\",\n            Accept: \"application/vnd.twitchtv.v5+json\",\n            Authorization: `Bearer ${tokens.access_token}`,\n        };\n        const { data: [profile], } = await fetch(this.config.profileUrl, { headers: headers }).then((res) => res.json());\n        return profile;\n    }\n}\n"],"names":[],"mappings":";;;;;AACA,MAAM,aAAa,GAAG;AACtB,EAAE,EAAE,EAAE,QAAQ;AACd,EAAE,KAAK,EAAE,iBAAiB;AAC1B,EAAE,cAAc,EAAE,mCAAmC;AACrD,EAAE,gBAAgB,EAAE,uCAAuC;AAC3D,EAAE,UAAU,EAAE,mCAAmC;AACjD,CAAC,CAAC;AACK,MAAM,oBAAoB,SAAS,cAAc,CAAC;AACzD,EAAE,WAAW,CAAC,MAAM,EAAE;AACtB,IAAI,KAAK,CAAC;AACV,MAAM,GAAG,aAAa;AACtB,MAAM,GAAG,MAAM;AACf,KAAK,CAAC,CAAC;AACP,GAAG;AACH,EAAE,MAAM,cAAc,CAAC,MAAM,EAAE;AAC/B,IAAI,MAAM,OAAO,GAAG;AACpB,MAAM,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,EAAE;AAC5C,MAAM,MAAM,EAAE,kCAAkC;AAChD,MAAM,aAAa,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;AACpD,KAAK,CAAC;AACN,IAAI,MAAM,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,EAAE,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AAC3G,IAAI,OAAO,OAAO,CAAC;AACnB,GAAG;AACH;;;;"}